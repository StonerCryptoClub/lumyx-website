function trackBookingStart(){console.log("Tracking booking start"),"undefined"!=typeof fbq&&fbq("track","InitiateCheckout",{content_category:"Booking",content_name:"Strategy Call"})}async function trackBookingComplete(e){if(console.log("Tracking booking completion:",e),"undefined"!=typeof fbq&&fbq("track","Schedule",{content_category:"Booking",content_name:"Strategy Call",currency:"USD",value:0,predicted_ltv:0}),e&&e.event){const t=e.event,n=e.invitee||{};try{const e={email:n.email,name:n.name,phone:n.phone||null,date:new Date(t.start_time).toISOString().split("T")[0],time:new Date(t.start_time).toLocaleTimeString("en-US",{hour12:!1}),callType:"Strategy Call",eventId:t.uuid,notes:n.questions_and_responses||null};if(console.log("Storing booking data:",e),"function"==typeof window.addBooking){const t=await window.addBooking(e);console.log("Booking storage result:",t),t.success||console.error("Failed to store booking:",t.error)}else console.error("addBooking function not available")}catch(e){console.error("Error processing booking:",e)}}else console.error("Invalid event data:",e)}function trackContactSubmit(){"undefined"!=typeof fbq&&fbq("track","Contact")}function trackPricingView(){"undefined"!=typeof fbq&&fbq("track","ViewContent",{content_category:"Pricing",content_name:"Services Pricing"})}function setupFormValidation(e){const t=e.querySelectorAll("input, textarea, select");t.forEach((e=>{"hidden"!==e.type&&(e.addEventListener("blur",(function(){validateInput(this)})),e.addEventListener("input",(function(){this.classList.remove("invalid");const e=this.parentElement.querySelector(".error-message");e&&(e.textContent="",e.style.display="none")})))})),e.addEventListener("submit",(function(n){let o=!0;if(t.forEach((e=>{"hidden"===e.type||validateInput(e)||(o=!1)})),o){const t=e.querySelector(".form-error");t&&(t.style.display="none");const n=e.querySelector('button[type="submit"]');if(n){const e=n.textContent;n.disabled=!0,n.innerHTML='<i class="fas fa-spinner fa-spin"></i> Sending...',setTimeout((()=>{n.disabled=!1,n.innerHTML=e}),3e3)}}else{n.preventDefault();const t=e.querySelector(".invalid");t&&(t.focus(),t.scrollIntoView({behavior:"smooth",block:"center"}));const o=e.querySelector(".form-error");o&&(o.textContent="Please correct the errors in the form.",o.style.display="block")}}))}function validateInput(e){if(e.disabled)return!0;const t=e.hasAttribute("required"),n=e.getAttribute("minlength"),o=e.getAttribute("maxlength"),r=e.getAttribute("pattern"),i=e.type,s=e.value.trim();let a=e.parentElement.querySelector(".error-message");a||(a=document.createElement("div"),a.className="error-message",e.parentElement.appendChild(a));let l=!0,c="";return t&&""===s?(l=!1,c="This field is required"):"email"!==i||""===s||validateEmail(s)?"url"!==i||""===s||validateUrl(s)?"tel"!==i&&!e.classList.contains("phone-input")||""===s||validatePhone(s)?n&&s.length<parseInt(n)?(l=!1,c=`Please enter at least ${n} characters`):o&&s.length>parseInt(o)?(l=!1,c=`Please enter no more than ${o} characters`):r&&""!==s&&!new RegExp(r).test(s)&&(l=!1,c=e.getAttribute("data-pattern-message")||"Please match the requested format"):(l=!1,c="Please enter a valid phone number"):(l=!1,c="Please enter a valid URL"):(l=!1,c="Please enter a valid email address"),l?(e.classList.remove("invalid"),e.classList.add("valid"),a.textContent="",a.style.display="none"):(e.classList.remove("valid"),e.classList.add("invalid"),a.textContent=c,a.style.display="block"),l}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function validateUrl(e){try{return new URL(e),!0}catch(e){return!1}}function validatePhone(e){const t=e.replace(/[\s()-]/g,"");return/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(t)}function initContactForm(){const e=document.getElementById("contactForm");e&&e.addEventListener("submit",(function(t){t.preventDefault();const n=document.getElementById("name").value.trim(),o=document.getElementById("email").value.trim(),r=document.getElementById("message").value.trim();let i=!0;if(i=validateInput(document.getElementById("name"))&&i,i=validateInput(document.getElementById("email"))&&i,i=validateInput(document.getElementById("message"))&&i,i){const t=e.querySelector('button[type="submit"]');t.disabled=!0,t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Sending...';sendContactForm({name:n,email:o,message:r}).then((t=>{showFormSuccess(e,"Thank you for your message! We will get back to you soon."),e.reset(),window.trackEvent&&window.trackEvent("contact_form_submission",{status:"success"})})).catch((t=>{showFormError(e,"There was an error sending your message. Please try again later or contact us directly."),window.trackEvent&&window.trackEvent("contact_form_submission",{status:"error",error:t.message})})).finally((()=>{t.disabled=!1,t.innerHTML="Send Message"}))}}))}function initNewsletterForm(){document.querySelectorAll(".newsletter form").forEach((e=>{e.addEventListener("submit",(function(t){t.preventDefault();const n=e.querySelector('input[type="email"]');if(n&&validateInput(n)){const t=e.querySelector('button[type="submit"]');t&&(t.disabled=!0,t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Subscribing...'),window.trackEvent&&window.trackEvent("newsletter_signup",{source:"website_footer"}),setTimeout((()=>{e.submit()}),500)}}))}))}function sendContactForm(e){return new Promise(((e,t)=>{setTimeout((()=>{e({success:!0})}),1500)}))}function showFormSuccess(e,t){let n=e.querySelector(".success-message");n||(n=document.createElement("div"),n.className="success-message",e.prepend(n)),n.textContent=t,n.style.display="block",n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{n.style.display="none"}),5e3)}function showFormError(e,t){let n=e.querySelector(".form-error");n||(n=document.createElement("div"),n.className="form-error",e.prepend(n)),n.textContent=t,n.style.display="block",n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{n.style.display="none"}),5e3)}function hidePageLoader(){const e=document.getElementById("page-loader");e&&(e.style.display="none");const t=document.querySelector(".container");t&&(t.style.display="block",t.style.opacity="1")}function fixCommonErrors(){window.caseStudiesLoaded=window.caseStudiesLoaded||function(){},window.addEventListener("error",(function(e){e.message&&(e.message.includes("Calendly")||e.message.includes("calendar"))&&(e.preventDefault(),e.stopPropagation())}),!0)}function lazyLoadImages(){document.querySelectorAll("img:not([loading])").forEach((e=>{e.setAttribute("loading","lazy")}));const e=document.querySelectorAll("img[data-src]");if(e.length>0&&"IntersectionObserver"in window){const t=new IntersectionObserver(((e,n)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.onload=()=>{n.removeAttribute("data-src")},t.unobserve(n)}}))}));e.forEach((e=>{t.observe(e)}))}}function optimizeThirdPartyScripts(){[{src:"https: