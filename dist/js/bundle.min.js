function trackBookingStart(){console.log("Tracking booking start"),"undefined"!=typeof fbq&&fbq("track","InitiateCheckout",{content_category:"Booking",content_name:"Strategy Call"})}async function trackBookingComplete(e){if(console.log("Tracking booking completion:",e),"undefined"!=typeof fbq&&fbq("track","Schedule",{content_category:"Booking",content_name:"Strategy Call",currency:"USD",value:0,predicted_ltv:0}),e&&e.event){const t=e.event,n=e.invitee||{};try{const e={email:n.email,name:n.name,phone:n.phone||null,date:new Date(t.start_time).toISOString().split("T")[0],time:new Date(t.start_time).toLocaleTimeString("en-US",{hour12:!1}),callType:"Strategy Call",eventId:t.uuid,notes:n.questions_and_responses||null};if(console.log("Storing booking data:",e),"function"==typeof window.addBooking){const t=await window.addBooking(e);console.log("Booking storage result:",t),t.success||console.error("Failed to store booking:",t.error)}else console.error("addBooking function not available")}catch(e){console.error("Error processing booking:",e)}}else console.error("Invalid event data:",e)}function trackContactSubmit(){"undefined"!=typeof fbq&&fbq("track","Contact")}function trackPricingView(){"undefined"!=typeof fbq&&fbq("track","ViewContent",{content_category:"Pricing",content_name:"Services Pricing"})}function setupFormValidation(e){const t=e.querySelectorAll("input, textarea, select");t.forEach((e=>{"hidden"!==e.type&&(e.addEventListener("blur",(function(){validateInput(this)})),e.addEventListener("input",(function(){this.classList.remove("invalid");const e=this.parentElement.querySelector(".error-message");e&&(e.textContent="",e.style.display="none")})))})),e.addEventListener("submit",(function(n){let o=!0;if(t.forEach((e=>{"hidden"===e.type||validateInput(e)||(o=!1)})),o){const t=e.querySelector(".form-error");t&&(t.style.display="none");const n=e.querySelector('button[type="submit"]');if(n){const e=n.textContent;n.disabled=!0,n.innerHTML='<i class="fas fa-spinner fa-spin"></i> Sending...',setTimeout((()=>{n.disabled=!1,n.innerHTML=e}),3e3)}}else{n.preventDefault();const t=e.querySelector(".invalid");t&&(t.focus(),t.scrollIntoView({behavior:"smooth",block:"center"}));const o=e.querySelector(".form-error");o&&(o.textContent="Please correct the errors in the form.",o.style.display="block")}}))}function validateInput(e){if(e.disabled)return!0;const t=e.hasAttribute("required"),n=e.getAttribute("minlength"),o=e.getAttribute("maxlength"),r=e.getAttribute("pattern"),i=e.type,s=e.value.trim();let a=e.parentElement.querySelector(".error-message");a||(a=document.createElement("div"),a.className="error-message",e.parentElement.appendChild(a));let l=!0,c="";return t&&""===s?(l=!1,c="This field is required"):"email"!==i||""===s||validateEmail(s)?"url"!==i||""===s||validateUrl(s)?"tel"!==i&&!e.classList.contains("phone-input")||""===s||validatePhone(s)?n&&s.length<parseInt(n)?(l=!1,c=`Please enter at least ${n} characters`):o&&s.length>parseInt(o)?(l=!1,c=`Please enter no more than ${o} characters`):r&&""!==s&&!new RegExp(r).test(s)&&(l=!1,c=e.getAttribute("data-pattern-message")||"Please match the requested format"):(l=!1,c="Please enter a valid phone number"):(l=!1,c="Please enter a valid URL"):(l=!1,c="Please enter a valid email address"),l?(e.classList.remove("invalid"),e.classList.add("valid"),a.textContent="",a.style.display="none"):(e.classList.remove("valid"),e.classList.add("invalid"),a.textContent=c,a.style.display="block"),l}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function validateUrl(e){try{return new URL(e),!0}catch(e){return!1}}function validatePhone(e){const t=e.replace(/[\s()-]/g,"");return/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/.test(t)}function initContactForm(){const e=document.getElementById("contactForm");e&&e.addEventListener("submit",(function(t){t.preventDefault();const n=document.getElementById("name").value.trim(),o=document.getElementById("email").value.trim(),r=document.getElementById("message").value.trim();let i=!0;if(i=validateInput(document.getElementById("name"))&&i,i=validateInput(document.getElementById("email"))&&i,i=validateInput(document.getElementById("message"))&&i,i){const t=e.querySelector('button[type="submit"]');t.disabled=!0,t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Sending...';sendContactForm({name:n,email:o,message:r}).then((t=>{showFormSuccess(e,"Thank you for your message! We will get back to you soon."),e.reset(),window.trackEvent&&window.trackEvent("contact_form_submission",{status:"success"})})).catch((t=>{showFormError(e,"There was an error sending your message. Please try again later or contact us directly."),window.trackEvent&&window.trackEvent("contact_form_submission",{status:"error",error:t.message})})).finally((()=>{t.disabled=!1,t.innerHTML="Send Message"}))}}))}function initNewsletterForm(){document.querySelectorAll(".newsletter form").forEach((e=>{e.addEventListener("submit",(function(t){t.preventDefault();const n=e.querySelector('input[type="email"]');if(n&&validateInput(n)){const t=e.querySelector('button[type="submit"]');t&&(t.disabled=!0,t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Subscribing...'),window.trackEvent&&window.trackEvent("newsletter_signup",{source:"website_footer"}),setTimeout((()=>{e.submit()}),500)}}))}))}function sendContactForm(e){return new Promise(((e,t)=>{setTimeout((()=>{e({success:!0})}),1500)}))}function showFormSuccess(e,t){let n=e.querySelector(".success-message");n||(n=document.createElement("div"),n.className="success-message",e.prepend(n)),n.textContent=t,n.style.display="block",n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{n.style.display="none"}),5e3)}function showFormError(e,t){let n=e.querySelector(".form-error");n||(n=document.createElement("div"),n.className="form-error",e.prepend(n)),n.textContent=t,n.style.display="block",n.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{n.style.display="none"}),5e3)}function hidePageLoader(){const e=document.getElementById("page-loader");e&&(e.style.display="none");const t=document.querySelector(".container");t&&(t.style.display="block",t.style.opacity="1")}function fixCommonErrors(){window.caseStudiesLoaded=window.caseStudiesLoaded||function(){},window.addEventListener("error",(function(e){e.message&&(e.message.includes("Calendly")||e.message.includes("calendar"))&&(e.preventDefault(),e.stopPropagation())}),!0)}function lazyLoadImages(){document.querySelectorAll("img:not([loading])").forEach((e=>{e.setAttribute("loading","lazy")}));const e=document.querySelectorAll("img[data-src]");if(e.length>0&&"IntersectionObserver"in window){const t=new IntersectionObserver(((e,n)=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.onload=()=>{n.removeAttribute("data-src")},t.unobserve(n)}}))}));e.forEach((e=>{t.observe(e)}))}}function optimizeThirdPartyScripts(){[{src:"https://assets.calendly.com/assets/external/widget.js",async:!0,defer:!0},{src:"https://connect.facebook.net/en_US/fbevents.js",async:!0,defer:!0}].forEach((e=>{if(!document.querySelector(`script[src="${e.src}"]`)){const t=document.createElement("script");t.src=e.src,e.async&&(t.async=!0),e.defer&&(t.defer=!0),document.body.appendChild(t)}}))}document.addEventListener("DOMContentLoaded",(function(){console.log("Initializing event listeners");const e=document.getElementById("calendly-container");e?(console.log("Found Calendly container, setting up event listeners"),window.addEventListener("calendly.event_scheduled",(function(e){console.log("Calendly event scheduled:",e.data),trackBookingComplete(e.data)})),e.addEventListener("click",(function(){trackBookingStart()}))):console.error("Calendly container not found");const t=document.getElementById("contactForm");t&&t.addEventListener("submit",(function(e){trackContactSubmit()}));const n=document.querySelector(".pricing-section");if(n){const e=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(trackPricingView(),e.unobserve(t.target))}))}),{threshold:.5});e.observe(n)}})),document.addEventListener("DOMContentLoaded",(function(){console.log("Newsletter script loaded - simple styling only");document.querySelectorAll(".newsletter-form input").forEach((e=>{e.addEventListener("focus",(function(){this.classList.add("focused")})),e.addEventListener("blur",(function(){this.classList.remove("focused"),this.checkValidity()?(this.classList.add("valid"),this.classList.remove("invalid")):this.value&&(this.classList.add("invalid"),this.classList.remove("valid"))}))}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("form").forEach((e=>{"true"!==e.getAttribute("novalidate")&&setupFormValidation(e)})),initContactForm(),initNewsletterForm()})),document.addEventListener("DOMContentLoaded",(function(){console.log("Simple form fix applied - no popups");document.querySelectorAll(".newsletter-form").forEach((e=>{e.setAttribute("action","https://eepurl.com/jdPU6E"),e.setAttribute("method","get"),e.setAttribute("target","_blank");const t=e.querySelector('input[type="email"]');t&&t.setAttribute("name","EMAIL");const n=e.querySelector('input[type="text"]');n&&n.setAttribute("name","FNAME");let o=e.querySelector('input[name="redirect"]');o||(o=document.createElement("input"),o.setAttribute("type","hidden"),o.setAttribute("name","redirect"),o.setAttribute("value","https://lumyx.co/mailchimp-thank-you.html"),e.appendChild(o),console.log("Added redirect parameter to form pointing to custom thank you page.")),e.addEventListener("submit",(function(e){console.log("Form submitting to Mailchimp via eepurl link...")}))})),console.log("All newsletter forms updated to use eepurl.com link. Forms should now submit correctly.")})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".email-address");if(e){e.style.wordBreak="break-all",e.style.wordWrap="break-word",e.style.overflowWrap="anywhere",e.style.maxWidth="100%",e.style.whiteSpace="nowrap",e.style.textOverflow="ellipsis",e.style.overflow="hidden",e.style.display="inline-block",window.innerWidth<=768&&(e.style.fontSize="0.9rem",e.style.maxWidth="95%"),window.innerWidth<=480&&(e.style.fontSize="0.85rem",e.style.letterSpacing="-0.5px",e.style.maxWidth="90%");const t=e.closest(".contact-item");t&&(t.style.maxWidth="100%",t.style.overflow="hidden")}window.addEventListener("resize",(function(){e&&(window.innerWidth<=480?(e.style.fontSize="0.85rem",e.style.letterSpacing="-0.5px",e.style.maxWidth="90%"):window.innerWidth<=768?(e.style.fontSize="0.9rem",e.style.letterSpacing="normal",e.style.maxWidth="95%"):(e.style.fontSize="1rem",e.style.letterSpacing="normal",e.style.maxWidth="100%"))}))})),document.addEventListener("DOMContentLoaded",(function(){hidePageLoader(),fixCommonErrors(),lazyLoadImages(),requestIdleCallback((()=>{optimizeThirdPartyScripts()})),setTimeout(hidePageLoader,1e3)}));const requestIdleCallback=window.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)};window.addEventListener("load",(function(){hidePageLoader()}));const animateOnScroll=()=>{const e=document.querySelectorAll(".animate-on-scroll"),t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("animate"),t.unobserve(e.target))}))}),{threshold:.1});e.forEach((e=>t.observe(e)))};class AnimationManager{constructor(){this.initSectionReveal(),this.initServiceCards(),this.initValueCards(),this.initSmoothScroll(),this.initProcessContainers(),this.initTestimonialReveal()}initSectionReveal(){const e=document.querySelectorAll(".section-reveal"),t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))}))}),{threshold:.2});e.forEach((e=>t.observe(e)))}initServiceCards(){const e=document.querySelectorAll(".service-card"),t=new IntersectionObserver((e=>{e.forEach(((e,n)=>{e.isIntersecting&&(setTimeout((()=>{e.target.classList.add("visible")}),100*n),t.unobserve(e.target))}))}),{threshold:.2});e.forEach((e=>t.observe(e)))}initValueCards(){document.querySelectorAll(".value-card").forEach((e=>{const t=e.querySelector(".value-icon i");t&&(e.addEventListener("mouseenter",(()=>{t.style.transform="scale(1.1)",t.style.color="var(--primary-orange)"})),e.addEventListener("mouseleave",(()=>{t.style.transform="scale(1)",t.style.color=""})))}))}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const n=e.getAttribute("href");if("#"===n)return;const o=document.querySelector(n);o&&o.scrollIntoView({behavior:"smooth",block:"start"})}))}))}initProcessContainers(){document.querySelectorAll(".process-container").forEach((e=>{e.addEventListener("mouseenter",(()=>{e.style.borderColor="var(--primary-orange)",e.style.backgroundColor="rgba(47, 69, 255, 0.03)"})),e.addEventListener("mouseleave",(()=>{e.style.borderColor="",e.style.backgroundColor=""}))}))}initTestimonialReveal(){const e=document.querySelectorAll(".testimonial-item"),t=new IntersectionObserver((e=>{e.forEach(((e,n)=>{e.isIntersecting&&(setTimeout((()=>{e.target.classList.add("visible")}),150*n),t.unobserve(e.target))}))}),{threshold:.2});e.forEach((e=>t.observe(e)))}}const initMouseParallax=()=>{document.addEventListener("mousemove",(e=>{const{clientX:t,clientY:n}=e,o=20*(t/window.innerWidth-.5),r=20*(n/window.innerHeight-.5);document.querySelectorAll(".floating-element").forEach(((e,t)=>{const n=1-.1*t;e.style.transform=`translate(${o*n}px, ${r*n}px)`}))}))};document.addEventListener("DOMContentLoaded",(()=>{const e=document.createElement("div");e.className="dynamic-bg",document.body.prepend(e),animateOnScroll(),new AnimationManager,initMouseParallax()}));